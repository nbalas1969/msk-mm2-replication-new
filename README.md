# MSK MirrorMaker 2 Terraform Project

This repository provisions a scalable, production-grade AWS infrastructure for cross-region Kafka topic replication using **Amazon MSK**, **MSK Connect**, and **Apache MirrorMaker 2 (MM2)**. Built entirely with Terraform and driven by modular IaC principles.

---

## ğŸ“¦ Features

- âš™ï¸ Modular infrastructure using `msk-connect`, `vpc-peering`, and `notifications`
- ğŸŒ Multi-region VPC peering with automatic CIDR route configuration
- ğŸ” MirrorMaker 2 replication with custom plugin support
- ğŸš¨ Post-deploy notifications to Microsoft Teams, SNS Email, or AWS SSM
- ğŸ“œ Configurable via `.tfvars`, reusable in CI/CD
- ğŸ” Validation helpers for offset monitoring and connector health

---

## ğŸ—‚ï¸ Project Structure
<<root>>:\msk-mm2-mirror-project\
â”œâ”€â”€ .github\
â”‚   â””â”€â”€ workflows\
â”‚       â””â”€â”€ terraform.yml         # â† CI pipeline for Terraform validate + plan
â”œâ”€â”€ modules\
â”‚   â”œâ”€â”€ msk-connect\
â”‚   â”œâ”€â”€ vpc-peering\
â”‚   â””â”€â”€ notifications\
â”œâ”€â”€ scripts\
â”‚   â””â”€â”€ get-vpc-peering-inputs.sh
â”œâ”€â”€ main.tf
â”œâ”€â”€ variables.tf
â”œâ”€â”€ outputs.tf
â”œâ”€â”€ terraform.tfvars.example
â”œâ”€â”€ .gitignore
â”œâ”€â”€ .gitattributes               # â† (optional) Normalizes line endings across OSes
â”œâ”€â”€ README.md


---

## ğŸš€ Quick Start

```bash
terraform init
terraform plan -var-file="terraform.tfvars"
terraform apply

ğŸ”” Optional Notifications
Enable Microsoft Teams notifications by setting the following in your terraform.tfvars:
enable_notifications       = true
enable_teams_notification  = true
teams_webhook_url          = "https://<your-teams-webhook>"
test_notification_mode     = false


For SSM and email SNS delivery, refer to modules/notifications.

ğŸ§ª Validate Post-Deployment
bash scripts/validate-mm2-replication.sh


Checks include:
- MSK Connect connector status
- Mirrored topics in destination cluster
- (Optional) Add consumer lag checks

ğŸ“„ Generated by
- Copilot + Balasubramanyam
- July 2025 Â· Hyderabad, India ğŸ‡®ğŸ‡³

---

### âœ… Commit and Push It

From your project root, run:

```bash
git add README.md
git commit -m "Add project README"
git push origin main --force

